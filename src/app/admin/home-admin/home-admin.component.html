
<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            
            <div class="card">
                <br><br>
                <div class="card-header card-header-warning" style="text-align: center;">
                    <h5 class="card-title">Add news</h5>
                </div>
                <div class="card-body">
                    <div class="row" *ngIf="erreur1" style="text-align: center; color: red; font-weight: bold;">
                        <div class="col-md-12">
                            You must enter title and content for new !
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <form [formGroup]="form"  method="post" enctype="multipart/form-data" style="text-align: center;"> 
                                <input name="file" (change)="onSelectImage($event)" type="file" style="display: none;"  #ImageInput accept=".jpg, .jpeg, .png, .PNG" multiple="non">
                                <img id="pic" (click)="ImageInput.click()" src="{{ this.imagePath }}" alt="" srcset="" style="cursor: pointer;width: 180px; max-width: 100%;margin-top: 15px;border-radius: 4px; border: 2px solid gainsboro;">
                            </form>
                        </div>
                        <div class="col-md-10">
                            <div class="row">
                                <div class="col-md-12">
                                    <mat-form-field class="example-full-width">
                                        <input matInput placeholder="Title" type="text" [value]="this.newsTitle" (input)="this.newsTitle = $event.target.value">
                                    </mat-form-field>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <mat-form-field class="example-full-width" style="height: 180px;">
                                        <textarea matInput rows="5" placeholder="Content" [value]="this.content" (input)="this.content = $event.target.value"></textarea>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                    <form [formGroup]="form"  method="post" enctype="multipart/form-data" style="text-align: center;"> 
                        <input name="file" (change)="onFileChanged($event)" type="file" id="excel" style="display: none;"  #fileInput accept=".xlsx, .xls, .xml, .jpg, .jpeg, .png, .gif, .docx, .doc, .odt, .ppt, .pptx, .pdf, .mp4, .wav, .mp3, .txt, .zip, .rar, .exe, .php, .html, .htm, .js, .ts, .css, .scss, .c, .cpp, .cs, .py, .pas, .sql, .json" multiple="non">
                        <button mat-raised-button type="button" class="btn btn-danger" style="margin-left:7px;cursor:pointer;" (click)="fileInput.click()">Select files<i class="material-icons" style="margin-left: 7px;margin-right:auto;">upload_file</i></button>
                    </form>

                    <div class="row" *ngFor="let stat of status">
                        <div class="col-md-3"><p style="font-weight: bold;">{{ stat.name }}</p></div>
                        
                        <div class="col-md-9"><progress-bar [progress]="stat.status" [color-degraded]="{'0': '#32CD32'}"></progress-bar></div>
                    </div>
                </div>
                <div style="display: flex; flex-direction:row;">
                    <input mat-raised-button (click)="addNews();" type="button" class="btn btn-danger" value="Save" style="padding: 9px 22px;margin-right:5%;margin-left: auto;">
                </div>
            
            </div>
        </div>

        <div class="row" *ngFor="let n of news">
            <div class="card mb-5 mb-xl-0">
                <div class="card-header card-header-danger" style="text-align: left;">
                    <h4 ><b>{{ n.title }}</b></h4>
                    <a style="font-size: 16px;" ><i class="material-icons" style="margin-right: 6px;">today</i>{{ n.date }}</a>
                </div>
                <div class="card-body p-5 actions">
                    <div class="row" style="direction: rtl;">
                        <i style="cursor: pointer;" class="material-icons" (click)="deleteNews(n._id)">delete_outline</i>
                    </div>
                    <div class="row" *ngIf="n.picture != ''">
                        
                        <div class="col-md-12" style="text-align: center;">
                            <img src="{{ n.picture }}" alt="" srcset="" style="cursor: pointer;height: auto; max-width: 260px;margin-top: 15px;">
                        </div>
                        
                    </div>
                   
                    <div class="row">
                        <div class="mb-2">
                            <i class=" text-primary"></i>
                            <a>{{ n.content }}</a>
                        </div>
                    </div>
                    <div class="row">
                        
                        <div class="col-md-1" *ngFor="let doc of n.docs">
                            <div class="row">
                                <a href="{{ doc.link }}"><img src="../../../assets/img/{{ doc.name.split('.')[doc.name.split('.').length - 1] }}.png" alt="" srcset="" style="width: 80px; max-width: 80%;"><span style="color: black; font-weight: bold;">{{ doc.name }}</span></a>
                            </div>
                            
                        </div>
                    </div>   
                </div>
            </div>
        </div>
    </div>
</div>

